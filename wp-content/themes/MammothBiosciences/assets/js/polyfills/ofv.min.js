/**
 * Object Fit Videos
 * Polyfill for object-fit and object-position CSS properties on video elements
 * Covers IE9, IE10, IE11, Edge, Safari <10
 *
 * Usage
 * In your CSS, add a special font-family tag for IE/Edge
 * video {
 *   object-fit: cover;
 *   font-family: 'object-fit: cover;';
 * }
 *
 * Before the closing body tag, or whenever the DOM is ready,
 * make the JavaScript call
 * objectFitVideos();
 *
 * All video elements with the special CSS property will be targeted
 *
 * @license  MIT (https://opensource.org/licenses/MIT)
 * @author   Todd Miller <todd.miller@tricomb2b.com>
 * @version  1.0.2
 * @changelog
 * 2016-08-19 - Adds object-position support.
 * 2016-08-19 - Add throttle function for more performant resize events
 * 2016-08-19 - Initial release with object-fit support, and
 *              object-position default 'center'
 * 2016-10-14 - No longer relies on window load event, instead requires a specific
 *              function call to initialize the videos for object fit and position.
 * 2016-11-28 - Support CommonJS environment, courtesy of @msorensson
 * 2016-12-05 - Refactors the throttling function to support IE
 * 2017-09-26 - Fix an issue with autplay not working on polyfilled videos
 *            - Adds the capability to specify elements to polyfill,
 *              instead of just checking every video element for the
 *              CSS property. Slight performance gain in most usecases,
 *              and a bigger gain in a few usecases.
 * 2017-10-24 - Add user agent check to enable polyfill for all Edge browsers.
 *              object-fit is supported on Edge >= 16, but currently just for images.
 */
var objectFitVideos=function(t){"use strict";var e=navigator.userAgent.indexOf("Edge/")>=0,o=new Image,i="object-fit"in o.style&&!e,n="object-position"in o.style&&!e,r=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g;function d(t){for(var e=getComputedStyle(t).fontFamily,o=null,i={};null!==(o=r.exec(e));)i[o[1]]=o[2];return i["object-position"]?function(t){~t["object-position"].indexOf("left")?t["object-position-x"]="left":~t["object-position"].indexOf("right")?t["object-position-x"]="right":t["object-position-x"]="center";~t["object-position"].indexOf("top")?t["object-position-y"]="top":~t["object-position"].indexOf("bottom")?t["object-position-y"]="bottom":t["object-position-y"]="center";return t}(i):i}function a(t,e){if("fill"!==e["object-fit"]){var o=t.style,i=window.getComputedStyle(t),n=document.createElement("object-fit");n.appendChild(t.parentNode.replaceChild(n,t));var r={height:"100%",width:"100%",boxSizing:"content-box",display:"inline-block",overflow:"hidden"};for(var d in"backgroundColor backgroundImage borderColor borderStyle borderWidth bottom fontSize lineHeight left opacity margin position right top visibility".replace(/\w+/g,(function(t){r[t]=i[t]})),r)n.style[d]=r[d];o.border=o.margin=o.padding=0,o.display="block",o.opacity=1,t.addEventListener("loadedmetadata",a),window.addEventListener("optimizedResize",a),t.readyState>=1&&(t.removeEventListener("loadedmetadata",a),a())}function a(){var i=t.videoWidth/t.videoHeight,r=n.clientWidth,d=n.clientHeight,a=r/d,c=0,p=0;o.marginLeft=o.marginTop=0,(i<a?"contain"===e["object-fit"]:"cover"===e["object-fit"])?(c=d*i,p=r/i,o.width=Math.round(c)+"px",o.height=d+"px","left"===e["object-position-x"]?o.marginLeft=0:"right"===e["object-position-x"]?o.marginLeft=Math.round(r-c)+"px":o.marginLeft=Math.round((r-c)/2)+"px"):(p=r/i,o.width=r+"px",o.height=Math.round(p)+"px","top"===e["object-position-y"]?o.marginTop=0:"bottom"===e["object-position-y"]?o.marginTop=Math.round(d-p)+"px":o.marginTop=Math.round((d-p)/2)+"px"),t.autoplay&&t.play()}}i&&n||(function(t){var e=-1;t?"length"in t||(t=[t]):t=document.querySelectorAll("video");for(;t[++e];){var o=d(t[e]);(o["object-fit"]||o["object-position"])&&(o["object-fit"]=o["object-fit"]||"fill",a(t[e],o))}}(t),function(t,e,o){o=o||window;var i=!1,n=null;try{n=new CustomEvent(e)}catch(t){(n=document.createEvent("Event")).initEvent(e,!0,!0)}o.addEventListener(t,(function(){i||(i=!0,requestAnimationFrame((function(){o.dispatchEvent(n),i=!1})))}))}("resize","optimizedResize"))};"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=objectFitVideos);